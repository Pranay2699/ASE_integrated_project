<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
<title>Home </title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Industial Visit project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static "styles/bootstrap4/bootstrap.min.css"%}">
<link href="{% static "plugins/font-awesome-4.7.0/css/font-awesome.min.css"%}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/owl.carousel.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/owl.theme.default.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/animate.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "styles/main_styles.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "styles/responsive.css"%}">

{#For Profile page   #}
{#    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">#}
{#    <link rel="stylesheet" href="{% static 'profile/profile.css' %}">#}
{#    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>#}
{#    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>#}
{#End link for profile page    #}
    <style >

	#myBtn2 {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  font-size: 18px;
  border: none;
  outline: none;
  background-color: red;
  color: white;
  cursor: pointer;
  padding: 15px;
  border-radius: 4px;
}

#myBtn2:hover {
  background-color: #555;
}


		* {
		box-sizing: border-box;
		}


		.autocomplete {
		/*the container must be positioned relative:*/
		position: relative;
		display: inline-block;
		}

		input {
		border: 1px solid transparent;
		background-color: #f1f1f1;
		padding: 10px;
		font-size: 16px;
		}

		input[type=text] {
		background-color: #f1f1f1;
		width: 100%;
		}

		input[type=submit] {
		background-color: DodgerBlue;
		color: #fff;
		cursor: pointer;
		}

		.autocomplete-items {
		position: absolute;
		border: 1px solid #d4d4d4;
		border-bottom: none;
		border-top: none;
		z-index: 99;
		/*position the autocomplete items to be the same width as the container:*/
		top: 100%;
		left: 0;
		right: 0;
		}

		.autocomplete-items div {
		padding: 10px;
		cursor: pointer;
		background-color: #fff;
		border-bottom: 1px solid #d4d4d4;
		}

		.autocomplete-items div:hover {
		/*when hovering an item:*/
		background-color: #e9e9e9;
		}

		.autocomplete-active {
		/*when navigating through the items using the arrow keys:*/
		background-color: DodgerBlue !important;
		color: #ffffff;
		}

		#query {
    border-radius: 5px;
    background: white;
    padding: 20px;
    width: 140px;
    height: 15px;
}

    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        /* height: 100%; */
        height: 100%;
        margin: 0;
        padding: 0;

      }
      /* Optional: Makes the sample page fill the window. */
      {#html, body {#}
      {#  height: 100%;#}
      {#  margin: 0;#}
      {#  padding: 0;#}
      {#}#}
      #description {
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
      }

      #infowindow-content .title {
        font-weight: bold;
      }

      #infowindow-content {
        display: none;
      }

      #map #infowindow-content {
        display: inline;
      }

      .pac-card {
        margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
      }

      #pac-container {
        padding-bottom: 12px;
        margin-right: 12px;
      }

      .pac-controls {
        display: inline-block;
        padding: 5px 11px;
      }

      .pac-controls label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }

      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 400px;
      }

      #pac-input:focus {
        border-color: #4d90fe;
      }

      #title {
        color: #fff;
        background-color: #4d90fe;
        font-size: 25px;
        font-weight: 500;
        padding: 6px 12px;
      }


		</style>
</head>
<body>

<div class="container-fluid">
	<button onclick="topFunction()" id="myBtn2" title="Go to top">Top</button>


	<!-- Home -->

	<div class="home">
		<!-- Header -->

		<header class="header" id="header">
			<div>
				<div class="header_top">
					<div class="container" >
						<div class="row">
							<div class="col">
								<div class="header_top_content d-flex flex-row align-items-center justify-content-start">
									<div class="logo">
										<a href="#">Visit<span style="color:#3385ff;">+</span></a>
									</div>
									<div class="header_top_extra d-flex flex-row align-items-center justify-content-start ml-auto">
										<div class="header_top_nav">

											<ul class="d-flex flex-row align-items-center justify-content-start">
											<li>Follow us on</li>


											</ul>
										</div>
									</div>
									<div class="hamburger ml-auto"><i class="fa fa-bars" aria-hidden="true"></i></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="header_nav" id="header_nav_pin">
					<div class="header_nav_inner">
						<div class="header_nav_container" style="background-color:#3385ff;">
							<div class="container">
								<div class="row">
									<div class="col">
										<div class="header_nav_content d-flex flex-row align-items-center justify-content-start">
											<nav class="main_nav">
												<ul class="d-flex flex-row align-items-center justify-content-start">
													<li class="active"><a href="{% url 'searchBarApp:searching' %}">Home</a></li>
													<li><a href="{% url 'searchBarApp:contact' %}">Contact</a></li>
													<li><a href="{% url 'searchBarApp:blog' %}">Blog</a></li>
{#                                                    <li><a href="{% url 'chat:room' %}">Chat</a></li>#}
													{% if user.is_authenticated %}
														<li><a href="{% url 'user_logout' %}">Logout</a></li>
                                                        <li><a href="{% url 'basicapp:profile' %}">{{ user.username }}</a></li>
													{% else %}
														<li><a href="{% url 'basicapp:user_login' %}">Login</a></li>
														<li><a href="{% url 'basicapp:register' %}">SignUp</a></li>
													{% endif %}
												</ul>

											</nav>
											<div class="search_content d-flex flex-row align-items-center justify-content-end ml-auto">
												<form  id="search_container_form" class="search_container_form" action="{% url 'searchBarApp:result' %}" method="POST">
													{% csrf_token %}
													<select class="category" name="select_type" id="select_type" style="width: 96px; height: 40px">
											<option value="Select" selected>Select one</option>
												<option value="All">All</option>
												<option value="Automobiles" >Automobiles</option>
												<option value="Assembling">Assembling</option>
												<option value="IT Companies">IT Companies</option>
												<option value="Manufacturing">Manufacturing</option>

												</select>

													<input  class="text" class="search_container_input" name="query" id="query" autocomplete="off" placeholder="Search for ..." size="1">
													<button  id="myBtn" type="submit" class="btn btn-success" >Search</button>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</header>
												{% block body_block %}

												{%endblock%}
	<!-- Footer -->

{#        <button type="button" class="btn btn-success btn-lg" style="background-color:#3385ff;" onclick="location.href='{% url 'final_app:review' %}'" >Reviews and Ratings</button>#}


	<footer class="footer" >
		<div class="parallax_background parallax-window" data-parallax="scroll" data-image-src="{% static "images/Footer.jpg"%}" data-speed="1"></div>
		<div class="footer_content">
			<div class="container">
				<div class="row">

					<!-- Footer About -->
					<div class="col-lg-3 footer_col">
						<div class="footer_about">
							<div class="logo">
								<a href="#">Visit<span style="color:#3385ff;">+</span></a>
							</div>
							<div class="footer_about_text">Visit+ is web service started by group of students to make things easier for practical knowledge seekers .</div>

						</div>
					</div>

					<!-- Footer Contact -->
					<div class="col-lg-5 footer_col" style="padding-left:200px">
						<div class="footer_contact">
							<div class="footer_contact_title">Subscribe to Our Newsletter</div>
							<div class="footer_contact_form_container">
								<form action="#" class="footer_contact_form" id="footer_contact_form">
									<div class="d-flex flex-xl-row flex-column align-items-center justify-content-between">
										<input type="email" class="footer_contact_input" placeholder="Enter your E-mail Id" required="required" >
									</div>
									<button class="footer_contact_button" style="background-color:#3385ff;">Subscribe</button>
								</form>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<div class="footer_bar">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="footer_bar_content d-flex flex-sm-row flex-column align-items-lg-center align-items-start justify-content-start">
							<nav class="footer_nav">
								<ul class="d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
									<li class="active"><a href="{% url 'searchBarApp:searching' %}">Home</a></li>
									<li><a href="{% url 'searchBarApp:about' %}">About</a></li>
									<li><a href="{% url 'searchBarApp:services' %}">Services</a></li>
									<li><a href="{% url 'searchBarApp:blog' %}">blog</a></li>
								</ul>
							</nav>
							<div class="footer_links" style="padding-left:450px">
								<ul class="d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
									<li><a href="{% url 'searchBarApp:contact' %}">Contact Us</a></li>
									<li><a href="https://in.pinterest.com/"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
									<li><a href="https://facebook.com/"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
									<li><a href="https://twitter.com/"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
										<li><a href="https://instagram.com/"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
									<li><a href="https://linkedin.com/"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>

								</ul>
								</div>
							</div>
							</div>
					</div>
				</div>
			</div>
		</div>
	</footer>


</div>



<script src="{% static "js/jquery-3.3.1.min.js" %}"></script>
<script src="{% static  "styles/bootstrap4/popper.js" %}"></script>
<script src="{% static  "styles/bootstrap4/bootstrap.min.js" %}"></script>
<script src="{%  static "plugins/OwlCarousel2-2.2.1/owl.carousel.js" %}"></script>
<script src="{% static "plugins/easing/easing.js" %}"></script>
<script src="{% static "plugins/parallax-js-master/parallax.min.js" %}"></script>
<script src="{% static "js/custom.js" %}"></script>

<script>

var selectedcategory,countries;

$(document).ready(function(){
		$("select.category").change(function(){
				selectedcategory = $(this).children("option:selected").val();
				console.log(selectedcategory)
				//alert("You have selected the category - " + selectedcategory);

				if(selectedcategory =="All")
				{

				 var countries = [{% for obj in objects %} "{{ obj.id_name }}", {% endfor %}];
					 console.log(" Suggestions for ALL")
					 console.log(countries)
					 autocomplete(document.getElementById("query"), countries);


				}

				else if(selectedcategory =="Manufacturing")
				{
					var sel=40;
				 console.log(sel)
				 var countries = [{% for obj in objects2 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)
				 console.log("Suggestions for Manufacturing")

				 autocomplete(document.getElementById("query"), countries);

				}

				else if(selectedcategory =="IT Companies")
				{
					var sel=40;
				 console.log(sel)
				 var countries = [{% for obj in objects5 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)
				 console.log("Suggestions for IT Companies")

				 autocomplete(document.getElementById("query"), countries);

				}


				else if(selectedcategory =="Automobiles")
				{
					var sel=50;
				 console.log(sel)
				 var countries = [{% for obj in objects3 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)
				 console.log("Suggestions for Automobiles")

				 autocomplete(document.getElementById("query"), countries);

				}

			 else if(selectedcategory =="Select")
			 {
					var sel=50;
					 console.log(sel)
				 var countries = [];

				 console.log("No suggestions")
				 autocomplete(document.getElementById("query"), countries);
				 console.log(countries)

				}



			 else if(selectedcategory =="Assembling")
				{
						var sel=50;
						 console.log(sel)
					 var countries = [{% for obj in objects4 %} "{{ obj.id_name }}", {% endfor %}];
					 console.log(countries)
					 console.log("Suggestions for Assembling")

					 autocomplete(document.getElementById("query"), countries);

					}


		});
});



function autocomplete(inp, arr) {
	/*the autocomplete function takes two arguments,
	the text field element and an array of possible autocompleted values:*/
	var currentFocus;
	/*execute a function when someone writes in the text field:*/
	inp.addEventListener("input", function(e) {
			var a, b, i, val = this.value;
			/*close any already open lists of autocompleted values*/
			closeAllLists();
			if (!val) { return false;}
			currentFocus = -1;
			/*create a DIV element that will contain the items (values):*/
			a = document.createElement("DIV");
			a.setAttribute("id", this.id + "autocomplete-list");
			a.setAttribute("class", "autocomplete-items");
			/*append the DIV element as a child of the autocomplete container:*/
			this.parentNode.appendChild(a);
			/*for each item in the array...*/
			for (i = 0; i < arr.length; i++) {
				/*check if the item starts with the same letters as the text field value:*/
				if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
					/*create a DIV element for each matching element:*/
					b = document.createElement("DIV");
					/*make the matching letters bold:*/
					b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
					b.innerHTML += arr[i].substr(val.length);
					/*insert a input field that will hold the current array item's value:*/
					b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
					/*execute a function when someone clicks on the item value (DIV element):*/
					b.addEventListener("click", function(e) {
							/*insert the value for the autocomplete text field:*/
							inp.value = this.getElementsByTagName("input")[0].value;
							/*close the list of autocompleted values,
							(or any other open lists of autocompleted values:*/
							closeAllLists();
					});
					a.appendChild(b);
				}
			}
	});
	/*execute a function presses a key on the keyboard:*/
	inp.addEventListener("keydown", function(e) {
			var x = document.getElementById(this.id + "autocomplete-list");
			if (x) x = x.getElementsByTagName("div");
			if (e.keyCode == 40) {
				/*If the arrow DOWN key is pressed,
				increase the currentFocus variable:*/
				currentFocus++;
				/*and and make the current item more visible:*/
				addActive(x);
			} else if (e.keyCode == 38) { //up
				/*If the arrow UP key is pressed,
				decrease the currentFocus variable:*/
				currentFocus--;
				/*and and make the current item more visible:*/
				addActive(x);
			} else if (e.keyCode == 13) {
				/*If the ENTER key is pressed, prevent the form from being submitted,*/
				e.preventDefault();
				if (currentFocus > -1) {
					/*and simulate a click on the "active" item:*/
					if (x) x[currentFocus].click();
				}
			}
	});
	function addActive(x) {
		/*a function to classify an item as "active":*/
		if (!x) return false;
		/*start by removing the "active" class on all items:*/
		removeActive(x);
		if (currentFocus >= x.length) currentFocus = 0;
		if (currentFocus < 0) currentFocus = (x.length - 1);
		/*add class "autocomplete-active":*/
		x[currentFocus].classList.add("autocomplete-active");
	}
	function removeActive(x) {
		/*a function to remove the "active" class from all autocomplete items:*/
		for (var i = 0; i < x.length; i++) {
			x[i].classList.remove("autocomplete-active");
		}
	}
	function closeAllLists(elmnt) {
		/*close all autocomplete lists in the document,
		except the one passed as an argument:*/
		var x = document.getElementsByClassName("autocomplete-items");
		for (var i = 0; i < x.length; i++) {
			if (elmnt != x[i] && elmnt != inp) {
				x[i].parentNode.removeChild(x[i]);
			}
		}
	}
	/*execute a function when someone clicks in the document:*/
	document.addEventListener("click", function (e) {
			closeAllLists(e.target);
	});
}

/*An array containing all the category names in the world:*/

window.addEventListener( "pageshow", function ( event ) {
	var historyTraversal = event.persisted ||
												 ( typeof window.performance != "undefined" &&
															window.performance.navigation.type === 2 );
	if ( historyTraversal ) {
		// Handle page restore.
		window.location.reload();
		console.log("Page Reloaded");
	}
});

/*--------------------------Function for submitting after enter key is pressed--------------------------------------------------------------------------------------------------------------------------------------------------------------- */

var input = document.getElementById("query");
input.addEventListener("keyup", function(event) {
		event.preventDefault();
		if (event.keyCode === 13) {
				document.getElementById("myBtn").click();
		}
});

window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
        document.getElementById("myBtn2").style.display = "block";
    } else {
        document.getElementById("myBtn2").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}

</script>

    <script>
      // This example requires the Places library. Include the libraries=places
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -33.8688, lng: 151.2195},
          zoom: 13
        });
        var card = document.getElementById('pac-card');
        var input = document.getElementById('pac-input');
        var types = document.getElementById('type-selector');
        var strictBounds = document.getElementById('strict-bounds-selector');

        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);

        var autocomplete = new google.maps.places.Autocomplete(input);

        // Bind the map's bounds (viewport) property to the autocomplete object,
        // so that the autocomplete requests use the current map bounds for the
        // bounds option in the request.
        autocomplete.bindTo('bounds', map);

        // Set the data fields to return when the user selects a place.
        autocomplete.setFields(
            ['address_components', 'geometry', 'icon', 'name']);

        var infowindow = new google.maps.InfoWindow();
        var infowindowContent = document.getElementById('infowindow-content');
        infowindow.setContent(infowindowContent);
        var marker = new google.maps.Marker({
          map: map,
          anchorPoint: new google.maps.Point(0, -29)
        });

        autocomplete.addListener('place_changed', function() {
          infowindow.close();
          marker.setVisible(false);
          var place = autocomplete.getPlace();
          if (!place.geometry) {
            // User entered the name of a Place that was not suggested and
            // pressed the Enter key, or the Place Details request failed.
            window.alert("No details available for input: '" + place.name + "'");
            return;
          }

          // If the place has a geometry, then present it on a map.
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }
          marker.setPosition(place.geometry.location);
          marker.setVisible(true);

          var address = '';
          if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
          }

          infowindowContent.children['place-icon'].src = place.icon;
          infowindowContent.children['place-name'].textContent = place.name;
          infowindowContent.children['place-address'].textContent = address;
          infowindow.open(map, marker);
        });

        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        function setupClickListener(id, types) {
          var radioButton = document.getElementById(id);
          radioButton.addEventListener('click', function() {
            autocomplete.setTypes(types);
          });
        }

        setupClickListener('changetype-all', []);
        setupClickListener('changetype-address', ['address']);
        setupClickListener('changetype-establishment', ['establishment']);
        setupClickListener('changetype-geocode', ['geocode']);

        document.getElementById('use-strict-bounds')
            .addEventListener('click', function() {
              console.log('Checkbox clicked! New state=' + this.checked);
              autocomplete.setOptions({strictBounds: this.checked});
            });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCe2otGPKiUf4Qq35MmOfDWHaQm-Cjtopw&libraries=places&callback=initMap" async defer></script>


</body>
</html>
